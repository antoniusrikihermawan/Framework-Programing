{% extends 'base.html' %} {% block content %}
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-primary fw-bold mb-0">
      <i class="bi bi-chat-left-text"></i> Daftar Pengaduan
    </h2>
    <a
      href="{% url 'warga:pengaduan-tambah' %}"
      class="btn btn-success shadow-sm px-4 py-2 fw-semibold"
    >
      <i class="bi bi-plus-circle"></i> Tambah Pengaduan
    </a>
  </div>

  {% if object_list %}
  <div class="card shadow-sm border-0 rounded-4 overflow-hidden">
    <div class="table-responsive">
      <table class="table align-middle mb-0">
        <thead style="background: linear-gradient(90deg, #e3f2fd, #bbdefb)">
          <tr class="text-primary text-center fw-semibold">
            <th>No</th>
            <th>Judul</th>
            <th>Isi Pengaduan</th>
            <th>Tanggal</th>
            <th>Status</th>
            <th>Pelapor</th>
            <th style="width: 20%">Aksi</th>
          </tr>
        </thead>
        <tbody>
          {% for pengaduan in object_list %}
          <tr class="table-row-hover">
            <td class="text-center fw-bold">{{ forloop.counter }}</td>
            <td class="fw-semibold text-dark">{{ pengaduan.judul }}</td>
            <td class="text-muted">
              {{ pengaduan.deskripsi|truncatewords:12 }}
            </td>
            <td class="text-center text-secondary">
              {{ pengaduan.tanggal_lapor|date:"d M Y" }}
            </td>
            <td class="text-center">
              {% if pengaduan.status == "BARU" %}
              <span class="badge bg-secondary px-3 py-2">Baru</span>
              {% elif pengaduan.status == "DIPROSES" %}
              <span class="badge bg-warning text-dark px-3 py-2">Diproses</span>
              {% else %}
              <span class="badge bg-success px-3 py-2">Selesai</span>
              {% endif %}
            </td>
            <td class="fw-semibold">{{ pengaduan.pelapor.nama_lengkap }}</td>
            <td class="text-center">
              <div class="d-flex justify-content-center gap-2">
                <a
                  href="{% url 'warga:pengaduan-edit' pengaduan.pk %}"
                  class="btn btn-sm btn-primary d-flex align-items-center gap-1 px-3 py-2 shadow-sm rounded-3"
                >
                  <i class="bi bi-pencil-square"></i> <span>Edit</span>
                </a>
                <a
                  href="{% url 'warga:pengaduan-hapus' pengaduan.pk %}"
                  class="btn btn-sm btn-danger d-flex align-items-center gap-1 px-3 py-2 shadow-sm rounded-3"
                  onclick="return confirm('Yakin ingin menghapus pengaduan ini?')"
                >
                  <i class="bi bi-trash"></i> <span>Hapus</span>
                </a>
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  {% else %}
  <div class="alert alert-info text-center shadow-sm rounded-3 py-3 mt-4">
    <i class="bi bi-info-circle"></i> Belum ada data pengaduan yang tercatat.
  </div>
  {% endif %}
</div>

<style>
  .table-row-hover:hover {
    background-color: #f1f8ff;
    transition: background-color 0.3s ease;
  }

  .table thead th {
    border: none;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .table td {
    vertical-align: middle;
  }

  /* Tombol Edit dan Hapus */
  .btn-primary {
    background-color: #1976d2;
    border: none;
  }

  .btn-primary:hover {
    background-color: #1565c0;
    box-shadow: 0 0 10px rgba(21, 101, 192, 0.3);
  }

  .btn-danger {
    background-color: #e53935;
    border: none;
  }

  .btn-danger:hover {
    background-color: #c62828;
    box-shadow: 0 0 10px rgba(198, 40, 40, 0.3);
  }

  .btn span {
    font-weight: 500;
  }
</style>
{% endblock %}
